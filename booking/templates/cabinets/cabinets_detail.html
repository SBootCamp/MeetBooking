{% extends 'base.html' %}
{% block title %}Бронирование кабинетов{% endblock %}
{% load static %}

{% block content %}
    <div class='container' style="margin-top: 30px">
        <div class="row">
            <div class="col-9">
                <div class="schedule">
                    <h2>Расписание кабинета</h2>
                    <div class="schedule-body">
                        <div class="row row-cols-7">
                            {% for date_time in schedule|slice:"21:28" %}
                                <div class="col" style="padding-right: 0; padding-left: 12px">
                                    <ul class="datetime-ul">
                                        {% for date,times in date_time.items %}
                                            <li class="date-li">{{ date}}</li>
                                            {% for time,event in times.items %}
                                                {% if event %}
                                                    <li class="time-li"
                                                        style="background: red; color: white">{{ time }}</li>
                                                {% else %}
                                                    <li class="time-li"
                                                        style="background: forestgreen; color: white">{{ time }}</li>
                                                {% endif %}
                                            {% endfor %}
                                        {% endfor %}
                                    </ul>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>


            <div class="col-3">
                <div class='booking'>
                    <div class="booking-form">
                        {% include "cabinets/bookinf_form.html" %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {#    <script>#}
    {#        $('#booking').on('submit', function (e) {#}
    {#            e.preventDefault();#}
    {#            $.ajax({#}
    {#                type: "POST",#}
    {#                url: "{% url 'booking' 1 %}",#}
    {#                data: {#}
    {#                    title: $('#id_title').val(),#}
    {#                    date: $('#id_date').val(),#}
    {#                    start_time: $('#id_start_time').val(),#}
    {#                    end_time: $('#id_end_time').val(),#}
    {#                    cabinet: $('#id_cabinet').val(),#}
    {#                    csrfmiddlewaretoken: '{{ csrf_token }}',#}
    {#                    dataType: "json",#}
    {#                },#}
    {#                success: function (response) {#}
    {#                    $("#booking").trigger("reset");#}
    {#                    alert("Вы успешно забронировали время");#}
    {#                },#}
    {#                error: function (response) {#}
    {#                    $('#errors').append(response.responseJSON.errors);#}
    {#                }#}
    {#            });#}
    {#        });#}
    {#    </script>#}
    {#    <script src="{% static 'js/javascript.js' %}" async></script>#}
{% endblock %}